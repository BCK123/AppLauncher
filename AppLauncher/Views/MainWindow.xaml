<Window x:Class="AppLauncher.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:AppLauncher.ViewModels" xmlns:converters="clr-namespace:AppLauncher.Converters"
        Title="AppLauncher" Height="520" Width="420">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <ResourceDictionary>
            <converters:IconPathToImageConverter x:Key="IconPathToImageConverter"/>

            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="\Resources\Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>

    </Window.Resources>


    <DockPanel>

        <!-- 顶部栏：Grid布局 + 引用样式 -->
        <Grid DockPanel.Dock="Top" Height="60" Background="White" 
              HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <!-- 标题 -->
                <ColumnDefinition Width="*"/>
                <!-- 占满中间 -->
                <ColumnDefinition Width="Auto"/>
                <!-- 右侧按钮 -->
            </Grid.ColumnDefinitions>


            <!-- 标题 -->
            <!-- 左侧标题 -->
            <TextBlock Grid.Column="0"
               Text="AppLauncher"
               Style="{StaticResource TopTitleTextStyle}"
               VerticalAlignment="Center"
               Margin="12,0"/>

            <!-- 右侧按钮区（关键：放在第 2 列） -->
            <StackPanel Grid.Column="2"
                Orientation="Horizontal"
                VerticalAlignment="Center"
                Margin="0,0,12,0"
                >

                <Button Style="{StaticResource IconButtonStyle}"
                ToolTip="添加"
                Click="BtnAdd_Click" Cursor="Hand">
                    <Image Source="/Resources/icons/setting.png"
                          
                   Width="18"
                   Height="18"/>
                </Button>

                <Button Style="{StaticResource IconButtonStyle}"
                ToolTip="设置"
                Click="BtnSettings_Click">
                    <Image Source="/Resources/icons/setting.png"
                   Width="18"
                   Height="18"/>
                </Button>
            </StackPanel>
        </Grid>


        <Border Margin="8" BorderBrush="Gray" BorderThickness="1" CornerRadius="4"
                AllowDrop="True" Background="WhiteSmoke"
                Drop="Border_Drop" DragOver="Border_DragOver">
            <ScrollViewer>
                <ItemsControl ItemsSource="{Binding Shortcuts}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="6" Margin="4" BorderBrush="#DDD" BorderThickness="1" CornerRadius="4">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="48"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Width="40" Height="40" Margin="4" VerticalAlignment="Center">
                                        <Image.Source>
                                            <Binding Path="IconPath" Converter="{StaticResource IconPathToImageConverter}"/>
                                        </Image.Source>
                                    </Image>

                                    <StackPanel Grid.Column="1" Margin="8,0">
                                        <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding TargetPath}" FontSize="11" Foreground="Gray" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="4">
                                        <Button Content="启动" Command="{Binding DataContext.ItemDoubleClickCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0"/>
                                        <Button Content="改名" Command="{Binding DataContext.RenameCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0"/>
                                        <Button Content="移除" Command="{Binding DataContext.RemoveCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </DockPanel>
</Window>
