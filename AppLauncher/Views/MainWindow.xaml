<Window x:Class="AppLauncher.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:AppLauncher.ViewModels" xmlns:converters="clr-namespace:AppLauncher.Converters"
        Title="AppLauncher" Height="520" Width="420">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <converters:IconPathToImageConverter x:Key="IconPathToImageConverter"/>
    </Window.Resources>


    <DockPanel>
        
        <TextBlock DockPanel.Dock="Top" Text="将快捷方式或 exe 拖到窗口以添加" 
                   Padding="8" FontWeight="Bold"/>
        <Button Content="设置" Click="BtnSettings_Click" HorizontalAlignment="Right" Margin="8"/>

        <Border Margin="8" BorderBrush="Gray" BorderThickness="1" CornerRadius="4"
                AllowDrop="True" Background="WhiteSmoke"
                Drop="Border_Drop" DragOver="Border_DragOver">
            <ScrollViewer>
                <ItemsControl ItemsSource="{Binding Shortcuts}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Padding="6" Margin="4" BorderBrush="#DDD" BorderThickness="1" CornerRadius="4">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="48"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Image Width="40" Height="40" Margin="4" VerticalAlignment="Center">
                                        <Image.Source>
                                            <Binding Path="IconPath" Converter="{StaticResource IconPathToImageConverter}"/>
                                        </Image.Source>
                                    </Image>

                                    <StackPanel Grid.Column="1" Margin="8,0">
                                        <TextBlock Text="{Binding DisplayName}" FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding TargetPath}" FontSize="11" Foreground="Gray" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" Margin="4">
                                        <Button Content="启动" Command="{Binding DataContext.ItemDoubleClickCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0"/>
                                        <Button Content="改名" Command="{Binding DataContext.RenameCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}" Margin="0,0,4,0"/>
                                        <Button Content="移除" Command="{Binding DataContext.RemoveCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>
    </DockPanel>
</Window>
